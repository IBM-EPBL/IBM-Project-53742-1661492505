o
    ^Pmc`  Ã£                   @   sÃ†   d dl mZmZmZmZmZmZ d dl Z eeÆ’Z	de	_
ddâ€ Z
e	jÂ 
dÂ¡d dâ€ Æ’Zd	d
â€ Ze	Â d
Â¡dd
â€ Æ’Ze	Â dÂ¡ddâ€ Æ’Ze	jdddÂddâ€ Æ’Ze	jdddÂddâ€ Æ’Zedkrae	jddÂ dS dS )Ã©    )ÃšFlaskÃšrender_templateÃš requestÃšredirectÃš url_forÃšflashNZ69420c                  C   sN   t Â dÂ¡} tddÆ’Â}| Â |Â Â¡ Â¡ W d   Æ’ n1 sw   Y  | Â Â¡  d S )NÃºusers.dbz
schema.sqlÃšr)Ãš sqlite3Ãš connectÃšopenZ
executescriptÃšreadÃšcommit)ÃšdbZschemaÂ© r   Ãº;C:\Users\Admin\Downloads\Assignment -2\with-database\app.pyÃš init_db   s
   
Ã¿r   Zinitdbc                   C   s   t Æ’  tdÆ’ d S )NzInitialised database.)r   Ãšprintr   r   r   r   Ãš
initdb_cmd   s   r   c                  C   s   t Â dÂ¡} t j| _| S )Nr   )r
   r
   ZRowZ
row_factory)Ãšconnr   r   r   Ãšget_db   s   
r   Ãº/c                   C   Ã³   t dddÂS )NÃº
index.htmlÃšHomeÂ©ÃštitleÂ©r   r   r   r   r   Ãšindex   Ã³   r   z/aboutc                   C   r   )Nz
about.htmlZAboutr   r   r   r   r   r   Ãšabout   r   r    z /signin)ÃšGETÃšPOST)Ãš methodsc                  C   sâ€™   d } t jdkrBt jd }t jd }tÆ’ }|Â d|fÂ¡Â Â¡ }|d u r$d} n||d kr0t|Æ’ d} | d u r:t td Æ’Æ’S t	| Æ’ |Â 
Â¡  t
dd	| d
ÂS )
Nr"   ÃšusernameÃšpasswordz-SELECT password FROM users WHERE username = ?zIncorrect Username/Password.zIncorrect Password.r    z
signin.htmlz Sign In)r   Ãšerror)r   ÃšmethodÃšformr   Ãš executeZfetchoner   r   r   r    Ãšcloser   )r&   r$   r%   r   Ãšuserr   r   r   Ãšsignin"   s(   


Ã¿Ã¾r,   z /signup)r"   r!   c                   C   sâ€    t jdkr=t jd } t jd }t jd }t jd }tÆ’ }|Â Â¡ }|Â d| |||fÂ¡ |Â Â¡  |Â  Â¡  |Â  Â¡  td dd	d
ÂS td
dd
ÂS )Nr"   r$   r%   ÃšemailÃšnamezHINSERT INTO users (username, password, email, name) VALUES (?, ?, ?, ?);r   r   zRegistration Successfull!)r   Zsuccz
signup.htmlz Sign Upr   )	r   r'   r(   r   Ãšcursorr)   r   r*   r   )r$   r%   r-   r.   r   Ãšcurrr   r   r   Ãšsignup;   s   




Ã¿r1   Z __app__T)Ãšdebug)Ãšflaskr   r   r   r   r   r    r
   Ãš__name__ÃšappÃš
secret_keyr   ÃšcliÃš commandr   r   Ãšrouter   r    r,   r1   Ãšrunr   r   r   r   Ãš<module>   s&     





Ã¿
